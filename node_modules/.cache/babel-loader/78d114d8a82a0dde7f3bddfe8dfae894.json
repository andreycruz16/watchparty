{"ast":null,"code":"import _asyncToGenerator from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import'./UserMenu.css';import{Popup,Button}from'semantic-ui-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserMenu=function UserMenu(_ref){var user=_ref.user,socket=_ref.socket,userToManage=_ref.userToManage,trigger=_ref.trigger,displayName=_ref.displayName,position=_ref.position,disabled=_ref.disabled,timestamp=_ref.timestamp,isChatMessage=_ref.isChatMessage;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var handleOpen=function handleOpen(){return setIsOpen(true);};var handleClose=function handleClose(){return setIsOpen(false);};return/*#__PURE__*/_jsxs(Popup,{className:\"userMenu\",trigger:trigger,on:\"click\",open:isOpen,onOpen:handleOpen,onClose:handleClose,position:position,disabled:disabled,children:[/*#__PURE__*/_jsx(\"div\",{className:\"userMenuHeader\",children:displayName}),/*#__PURE__*/_jsx(\"div\",{className:\"userMenuContent\",children:/*#__PURE__*/_jsxs(Button.Group,{vertical:true,labeled:true,icon:true,children:[/*#__PURE__*/_jsx(Button,{content:\"Kick\",negative:true,icon:\"ban\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return user===null||user===void 0?void 0:user.getIdToken();case 2:token=_context.sent;socket.emit('kickUser',{userToBeKicked:userToManage,uid:user===null||user===void 0?void 0:user.uid,token:token});setIsOpen(false);case 5:case\"end\":return _context.stop();}}},_callee);}))}),isChatMessage&&/*#__PURE__*/_jsx(Button,{content:\"Delete Message\",icon:\"comment\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return user===null||user===void 0?void 0:user.getIdToken();case 2:token=_context2.sent;socket.emit('CMD:deleteChatMessages',{author:userToManage,timestamp:timestamp,uid:user===null||user===void 0?void 0:user.uid,token:token});setIsOpen(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}))}),/*#__PURE__*/_jsx(Button,{content:\"Delete User's Messages\",icon:\"comments\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var token;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return user===null||user===void 0?void 0:user.getIdToken();case 2:token=_context3.sent;socket.emit('CMD:deleteChatMessages',{author:userToManage,uid:user===null||user===void 0?void 0:user.uid,token:token});setIsOpen(false);case 5:case\"end\":return _context3.stop();}}},_callee3);}))})]})})]});};","map":{"version":3,"sources":["/home/runner/work/watchparty/watchparty/src/components/UserMenu/UserMenu.tsx"],"names":["React","useState","Popup","Button","UserMenu","user","socket","userToManage","trigger","displayName","position","disabled","timestamp","isChatMessage","isOpen","setIsOpen","handleOpen","handleClose","getIdToken","token","emit","userToBeKicked","uid","author"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './UserMenu.css';\nimport { Popup, Button } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\nimport firebase from 'firebase/compat/app';\n\nexport const UserMenu = ({\n  user,\n  socket,\n  userToManage,\n  trigger,\n  displayName,\n  position,\n  disabled,\n  timestamp,\n  isChatMessage,\n}: {\n  user?: firebase.User;\n  socket: Socket;\n  userToManage: string;\n  trigger: any;\n  icon?: string;\n  displayName?: string;\n  position?: any;\n  disabled: boolean;\n  timestamp?: string;\n  isChatMessage?: boolean;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const handleOpen = () => setIsOpen(true);\n  const handleClose = () => setIsOpen(false);\n  return (\n    <Popup\n      className=\"userMenu\"\n      trigger={trigger}\n      on=\"click\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      position={position}\n      disabled={disabled}\n    >\n      <div className=\"userMenuHeader\">{displayName}</div>\n      <div className=\"userMenuContent\">\n        <Button.Group vertical labeled icon>\n          <Button\n            content=\"Kick\"\n            negative\n            icon=\"ban\"\n            onClick={async () => {\n              const token = await user?.getIdToken();\n              socket.emit('kickUser', {\n                userToBeKicked: userToManage,\n                uid: user?.uid,\n                token,\n              });\n              setIsOpen(false);\n            }}\n          />\n          {isChatMessage && (\n            <Button\n              content=\"Delete Message\"\n              icon=\"comment\"\n              onClick={async () => {\n                const token = await user?.getIdToken();\n                socket.emit('CMD:deleteChatMessages', {\n                  author: userToManage,\n                  timestamp: timestamp,\n                  uid: user?.uid,\n                  token,\n                });\n                setIsOpen(false);\n              }}\n            />\n          )}\n          <Button\n            content=\"Delete User's Messages\"\n            icon=\"comments\"\n            onClick={async () => {\n              const token = await user?.getIdToken();\n              socket.emit('CMD:deleteChatMessages', {\n                author: userToManage,\n                uid: user?.uid,\n                token,\n              });\n              setIsOpen(false);\n            }}\n          />\n        </Button.Group>\n      </div>\n    </Popup>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}